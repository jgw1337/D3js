<!DOCTYPE html>
<html lang="en">

<head>
  <title>Learning D3</title>
  <link rel="stylesheet" href="main.css">
  <script src="d3.min.js"></script>
</head>

<body>
  <script src="scatter-with-multiple-datasets-data.js"></script>
  <script>
    var w = 800;
    var h = 450;
    var margin = {
      top: 50,
      left: 100,
      right: 80,
      bottom: 40
    };
    var width = w - margin.left - margin.right;
    var height = h - margin.top - margin.bottom;

    var svg = d3.select("body").append("svg")
                .attr("id", "chart")
                .attr("width", w)
                .attr("height", h);
    var scatterChart = svg.append("g")
                          .classed("display", true)
                          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    var x = d3.scaleLinear()
              .domain(d3.extent(data, function (datum) {
                return datum.age;
              }))
              .range([0, width]);
    var y = d3.scaleLinear()
              .domain([1, 5])
              .range([height, 0]);

    function plot(params) {
      // enter()
      this.selectAll(".point")
          .data(params.data)
          .enter()
              .append("circle")
              .classed("point", true);

      // update
      this.selectAll(".point")
          .attr("r", 2)
          .attr("cx", function(datum) {
            return x(datum.age);
          })
          .attr("cy", function(datum) {
            return y(datum.glazed);
          })
          
      // exit()
      this.selectAll(".point")
          .data(params.data)
          .exit()
          .remove();
    }

    plot.call(scatterChart, {
      data: data
    })
  </script>
</body>

</html>